import { useState, useEffect } from "react";
import Head from "next/head";
import Image from "next/image";
import {
  Footer,
  Header,
  Hero,
  Loading,
  Section1,
  Section2,
  Section3,
  Section4,
  Section5,
  Section6,
  Section7,
  Section8,
} from "../components";
import { AnimatePresence, motion } from "framer-motion";
import { useGeneralContext } from "../context/GeneralContext";

const variants = {
  hidden: { opacity: 0, x: -200, y: 0 },
  enter: { opacity: 1, x: 0, y: 0 },
  exit: { opacity: 0, x: 0, y: -100 },
};

export default function Home() {
  const { loading, setLoading } = useGeneralContext();
  const [percent, setPercent] = useState(0);
  useEffect(() => {
    if (loading === true) {
      let clock = setInterval(() => {
        setPercent(percent++);
        if (percent > 100) {
          setLoading(false);
          clearInterval(clock);
        }
      }, 50);
    }
  }, []);
  return (
    <div>
      <Head>
        <title>Softkode</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      {/* <AnimatePresence initial={false}> */}
      {loading ? (
        <motion.div
          key="loader"
          variants={variants}
          initial="hidden"
          animate="enter"
          exit="exit"
          transition={{ type: "linear", ease: "easeInOut", duration: 0.8 }}
        >
          <Loading loading={loading} percent={percent} />
        </motion.div>
      ) : (
        <motion.div
          variants={variants}
          initial="hidden"
          animate="enter"
          exit="exit"
          key="main"
          transition={{ type: "linear", ease: "easeInOut", duration: 0.8 }}
        >
          <Header />
          <Hero />
          <Section1 />
          <Section2 />
          <Section3 />
          <Section4 />
          <Section5 />
          <Section6 />
          <Section7 />
          <Section8 />
          <Footer />
        </motion.div>
      )}
      {/* </AnimatePresence> */}
    </div>
  );
}
